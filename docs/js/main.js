const f=document.querySelector(".canvas"),s=f.getContext("2d"),S=document.querySelector(".points"),u=document.querySelector(".start"),l=20,d=14,g=30;let m=0;f.width=l*d;f.height=l*g;s.scale(l,l);const y=new Audio("/audio/tetris.mp3"),r=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]],o={position:{x:5,y:5},shape:[[1,1,0],[0,1,1]]},w=[[[1,1],[1,1]],[[1],[1],[1],[1]],[[1,1,1],[0,1,0]],[[0,1,1],[1,1,0]],[[1,1,0],[0,1,1]],[[1,0],[1,0],[1,1]],[[0,1],[0,1],[1,1]]];let h=0,E=0;function x(t=0){const i=t-E;E=t,h+=i,h>1e3&&(o.position.y++,h=0,c()&&(o.position.y--,A(),R())),v(),window.requestAnimationFrame(x)}function v(){s.fillStyle="#000",s.fillRect(0,0,f.width,f.height),r.forEach((t,i)=>{t.forEach((e,n)=>{e===1&&(s.fillStyle="yellow",s.fillRect(n,i,1,1))})}),o.shape.forEach((t,i)=>{t.forEach((e,n)=>{e&&(s.fillStyle="red",s.fillRect(n+o.position.x,i+o.position.y,1,1))})}),S.innerText=m}document.addEventListener("keydown",t=>{if(t.key==="ArrowLeft"&&(o.position.x--,c()&&o.position.x++),t.key==="ArrowRight"&&(o.position.x++,c()&&o.position.x--),t.key==="ArrowDown"&&(o.position.y++,c()&&(o.position.y--,A(),R())),t.key==="ArrowUp"){const i=[];for(let n=0;n<o.shape[0].length;n++){const a=[];for(let p=o.shape.length-1;p>=0;p--)a.push(o.shape[p][n]);i.push(a)}const e=o.shape;o.shape=i,c()&&(o.shape=e)}});function c(){return o.shape.find((t,i)=>t.find((e,n)=>{var a;return e!==0&&((a=r[i+o.position.y])==null?void 0:a[n+o.position.x])!==0}))}function A(){o.shape.forEach((t,i)=>{t.forEach((e,n)=>{e===1&&(r[i+o.position.y][n+o.position.x]=1)})}),o.position.x=Math.floor((d-o.shape[0].length)/2),o.position.y=0,o.shape=w[Math.floor(Math.random()*w.length)],c()&&(window.alert("Game over!"),r.forEach(t=>t.fill(0)))}function R(){const t=[];r.forEach((i,e)=>{i.every(n=>n===1)&&t.push(e)}),t.forEach(i=>{r.splice(i,1);const e=Array(d).fill(0);r.unshift(e),m+=10})}u.addEventListener("click",()=>{x(),u.remove(),y.volume=.2,y.play()});
//# sourceMappingURL=main.js.map
